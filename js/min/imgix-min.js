(function(){function t(){Object.freeze||(Object.freeze=function(t){return t}),function(t){for(var e,r,n={},i=function(){},o="memory".split(","),a="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");e=o.pop();)t[e]=t[e]||n;for(;r=a.pop();)t[r]=t[r]||i}(window.console||{}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),r=this,n=function(){},i=function(){return r.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,i.prototype=new n,i}),Array.prototype.filter||(Array.prototype.filter=function(t){if(void 0===this||null===this)throw new TypeError;var e=Object(this),r=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var n=[],i=arguments.length>=2?arguments[1]:void 0,o=0;r>o;o++)if(o in e){var a=e[o];t.call(i,a,o,e)&&n.push(a)}return n}),Array.prototype.map||(Array.prototype.map=function(t,e){var r,n,i;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),a=o.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(r=e),n=new Array(a),i=0;a>i;){var l,s;i in o&&(l=o[i],s=t.call(r,l,i,o),n[i]=s),i++}return n}),document.querySelectorAll||(document.querySelectorAll=function(t){var e,r=document.createElement("style"),n=[];for(document.documentElement.firstChild.appendChild(r),document._qsa=[],r.styleSheet.cssText=t+"{x-qsa:expression(document._qsa && document._qsa.push(this))}",window.scrollBy(0,0),r.parentNode.removeChild(r);document._qsa.length;)e=document._qsa.shift(),e.style.removeAttribute("x-qsa"),n.push(e);return document._qsa=null,n}),document.querySelector||(document.querySelector=function(t){var e=document.querySelectorAll(t);return e.length?e[0]:null}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=r.length;return function(i){if("object"!=typeof i&&("function"!=typeof i||null===i))throw new TypeError("Object.keys called on non-object");var o,a,l=[];for(o in i)t.call(i,o)&&l.push(o);if(e)for(a=0;n>a;a++)t.call(i,r[a])&&l.push(r[a]);return l}}()),!("getComputedStyle"in window)&&(window.getComputedStyle=function(){function t(e,r,n,i){var o,a=r[n],l=parseFloat(a),s=a.split(/\d/)[0];return i=null!=i?i:/%|em/.test(s)&&e.parentElement?t(e.parentElement,e.parentElement.currentStyle,"fontSize",null):16,o="fontSize"==n?i:/width/i.test(n)?e.clientWidth:e.clientHeight,"em"==s?l*i:"in"==s?96*l:"pt"==s?96*l/72:"%"==s?l/100*o:l}function e(t,e){var r="border"==e?"Width":"",n=e+"Top"+r,i=e+"Right"+r,o=e+"Bottom"+r,a=e+"Left"+r;t[e]=(t[n]==t[i]==t[o]==t[a]?[t[n]]:t[n]==t[o]&&t[a]==t[i]?[t[n],t[i]]:t[a]==t[i]?[t[n],t[i],t[o]]:[t[n],t[i],t[o],t[a]]).join(" ")}function r(r){var n=r.currentStyle,i=this,o=t(r,n,"fontSize",null);for(property in n)/width|height|margin.|padding.|border.+W/.test(property)&&"auto"!==i[property]?i[property]=t(r,n,property,o)+"px":"styleFloat"===property?i["float"]=n[property]:i[property]=n[property];return e(i,"margin"),e(i,"padding"),e(i,"border"),i.fontSize=o+"px",i}function n(t){return new r(t)}return r.prototype={constructor:r,getPropertyPriority:function(){},getPropertyValue:function(t){return this[t]||""},item:function(){},removeProperty:function(){},setProperty:function(){},getPropertyCSSValue:function(){}},n}(window)),function(){function t(t,e){return function(){t.apply(e,arguments)}}function e(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(e,t(n,this),t(i,this))}function r(t){var e=this;return null===this._state?void this._deferreds.push(t):void u(function(){var r=e._state?t.onFulfilled:t.onRejected;if(null===r)return void(e._state?t.resolve:t.reject)(e._value);var n;try{n=r(e._value)}catch(i){return void t.reject(i)}t.resolve(n)})}function n(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var r=e.then;if("function"==typeof r)return void l(t(r,e),t(n,this),t(i,this))}this._state=!0,this._value=e,o.call(this)}catch(a){i.call(this,a)}}function i(t){this._state=!1,this._value=t,o.call(this)}function o(){for(var t=0,e=this._deferreds.length;e>t;t++)r.call(this,this._deferreds[t]);this._deferreds=null}function a(t,e,r,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=r,this.reject=n}function l(t,e,r){var n=!1;try{t(function(t){n||(n=!0,e(t))},function(t){n||(n=!0,r(t))})}catch(i){if(n)return;n=!0,r(i)}}var s;s="object"==typeof window&&window?window:global,"undefined"!=typeof module&&module.exports?module.exports=s.Promise?s.Promise:e:s.Promise||(s.Promise=e);var u=s.setImmediate||function(t){setTimeout(t,1)},c=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};e.prototype["catch"]=function(t){return this.then(null,t)},e.prototype.then=function(t,n){var i=this;return new e(function(e,o){r.call(i,new a(t,n,e,o))})},e.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&c(arguments[0])?arguments[0]:arguments);return new e(function(e,r){function n(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var l=a.then;if("function"==typeof l)return void l.call(a,function(t){n(o,t)},r)}t[o]=a,0===--i&&e(t)}catch(s){r(s)}}if(0===t.length)return e([]);for(var i=t.length,o=0;o<t.length;o++)n(o,t[o])})},e.resolve=function(t){return t&&"object"==typeof t&&t.constructor===e?t:new e(function(e){e(t)})},e.reject=function(t){return new e(function(e,r){r(t)})},e.race=function(t){return new e(function(e,r){for(var n=0,i=t.length;i>n;n++)t[n].then(e,r)})}}()}function e(){return l}"undefined"!=typeof window&&t();var r=this,n={version:"1.1.1"};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=n),exports.imgix=n):r.imgix=n;var i="imgix-usable";n.helpers={debouncer:function(t,e){var r;return function(){var n=this,i=arguments,o=function(){r=null,t.apply(n,i)};window.clearTimeout(r),r=window.setTimeout(o,e)}},throttler:function(t,e){var r;return function(){var n,i=this,o=arguments;r||(n=function(){r=null,t.apply(i,o)},r=window.setTimeout(n,e))}},urlParser:function(){function t(t){return!isNaN(parseFloat(t))&&isFinite(t)}return function(e,r){var n=r||window.location.toString();if(!e)return n;e=e.toString(),"//"===n.substring(0,2)?n="http:"+n:1===n.split("://").length&&(n="http://"+n),r=n.split("/");var i={auth:""},o=r[2].split("@");1===o.length?o=o[0].split(":"):(i.auth=o[0],o=o[1].split(":")),i.protocol=r[0],i.hostname=o[0],i.port=o[1]||("https"===i.protocol.split(":")[0].toLowerCase()?"443":"80"),i.pathname=(r.length>3?"/":"")+r.slice(3,r.length).join("/").split("?")[0].split("#")[0];var a=i.pathname;"/"===a.charAt(a.length-1)&&(a=a.substring(0,a.length-1));var l=i.hostname,s=l.split("."),u=a.split("/");if("hostname"===e)return l;if("domain"===e)return/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/.test(l)?l:s.slice(-2).join(".");if("sub"===e)return s.slice(0,s.length-2).join(".");if("port"===e)return i.port;if("protocol"===e)return i.protocol.split(":")[0];if("auth"===e)return i.auth;if("user"===e)return i.auth.split(":")[0];if("pass"===e)return i.auth.split(":")[1]||"";if("path"===e)return i.pathname;if("."===e.charAt(0)){if(e=e.substring(1),t(e))return e=parseInt(e,10),s[0>e?s.length+e:e-1]||""}else{if(t(e))return e=parseInt(e,10),u[0>e?u.length+e:e]||"";if("file"===e)return u.slice(-1)[0];if("filename"===e)return u.slice(-1)[0].split(".")[0];if("fileext"===e)return u.slice(-1)[0].split(".")[1]||"";if("?"===e.charAt(0)||"#"===e.charAt(0)){var c=n,p=null;if("?"===e.charAt(0)?c=(c.split("?")[1]||"").split("#")[0]:"#"===e.charAt(0)&&(c=c.split("#")[1]||""),!e.charAt(1))return c;e=e.substring(1),c=c.split("&");for(var d=0,h=c.length;h>d;d++)if(p=c[d].split("="),p[0]===e)return p[1]||"";return null}}return""}}(),mergeObject:function(){for(var t,e={},r=0,n=arguments.length;n>r;r++)for(t in arguments[r])arguments[r].hasOwnProperty(t)&&(e[t]=arguments[r][t]);return e},pixelRound:function(t,e){return Math.ceil(t/e)*e},isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},getZoom:function(){var t,e="http://www.w3.org/2000/svg",r=1;return document.createElementNS&&(t=document.createElementNS(e,"svg"),t.setAttribute("xmlns",e),t.setAttribute("version","1.1"),document.body.appendChild(t),r=t.currentScale||1,document.body.removeChild(t)),r},getDPR:function(){var t=window.devicePixelRatio?window.devicePixelRatio:1;if(t%1!==0){var e=t.toString();e=e.split(".")[1],t=e.length>1&&"0"!==e.slice(1,2)?t.toFixed(2):t.toFixed(1)}return t},getWindowWidth:function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)||1024},getWindowHeight:function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)||768},getImgSrc:function(t){return t.getAttribute("data-src")||t.getAttribute("src")},calculateElementSize:function(t){var e={width:t.offsetWidth,height:t.offsetHeight};if(null===t.parentNode||t===document.body)return e.width=this.getWindowWidth(),e.height=this.getWindowHeight(),e;if(0!==e.width||0!==e.height)return t.alt&&!t.fluid?(t.fluid=!0,this.calculateElementSize(t.parentNode)):e;var r,n,i={},o={position:"absolute",visibility:"hidden",display:"block"};for(n in o)o.hasOwnProperty(n)&&(i[n]=t.style[n],t.style[n]=o[n]);r={width:t.offsetWidth,height:t.offsetHeight};for(n in o)o.hasOwnProperty(n)&&(t.style[n]=i[n]);return 0===r.width||0===r.height?this.calculateElementSize(t.parentNode):r},isReallyObject:function(t){return t&&"object"==typeof t&&"[object Object]"===t.toString()},isFluidSet:function(t){return t&&"object"==typeof t&&"[object FluidSet]"===t.toString()},extractInt:function(t){return void 0===t?0:"number"==typeof t?t:parseInt(t.replace(/\D/g,""),10)||0},camelize:function(t){return t.replace(/[-_\s]+(.)?/g,function(t,e){return e?e.toUpperCase():""})},getElementCssProperty:function(t,e){return window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):t&&t.style&&e?t.style[this.camelize(e)]:""},matchesSelector:function(t,e){var r=(t.parentNode||document).querySelectorAll(e);return Array.prototype.slice.call(r).indexOf(t)>-1}},n.getElementByXPathClassName=function(t){return document.querySelector("."+n.getXPathClass(t))},n.getElementImageByXPathClassName=function(t){return n.getElementImage(n.getElementByXPathClassName(t))},n.isImageElement=function(t){return t&&t.tagName&&"img"===t.tagName.toLowerCase()},n.setElementImageAfterLoad=function(t,e,r){var i=new Image;i.onload=function(){n.setElementImage(t,e),"function"==typeof r&&r(t,e)},i.src=e},n.setElementImage=function(t,e){if(!t)return!1;if(n.isImageElement(t))return t.src!==e&&(t.src=e),!0;var r=n.getBackgroundImage(t);return r!==e?r?(t.style.cssText=t.style.cssText.replace(r,e),!0):(document.addEventListener?t.style.backgroundImage="url("+e+")":t.style.cssText="background-image:url("+e+")",!0):!1},n.getEmptyImage=function(){return n.versionifyUrl("https://assets.imgix.net/pixel.gif")},n.getElementImage=function(t){return n.isImageElement(t)?t.src:n.getBackgroundImage(t)},n.getRawBackgroundImage=function(t){return t.style.cssText.match(/url\(([^\)]+)/)},n.getBackgroundImage=function(t){var e=n.getRawBackgroundImage(t);return e&&2===e.length?e[1]:""},n.getColorBrightness=function(t){if(!t)return 0;"#"===t.slice(0,1)&&(t=n.hexToRGB(t));var e=t.replace(/[^0-9,]+/g,"").split(","),r=parseInt(e[0],10),i=parseInt(e[1],10),o=parseInt(e[2],10);return Math.sqrt(r*r*.241+i*i*.691+o*o*.068)},n.applyAlphaToRGB=function(t,e){var r="rgba"!==t.slice(0,4),n=t.split(",");return n=n.map(function(t){return parseInt(t.replace(/\D/g,""),10)}),r?n.push(e):4===n.length&&(n[3]=e),"rgba("+n.join(", ")+")"},n.hexToRGB=function(t){function e(t){return(t+t).toString()}if(t)if("#"===t.slice(0,1))t=t.slice(1,t.length);else if("rgb"===t.slice(0,3))return t;var r=0,n=0,i=0;return 3===t.length?(r=parseInt(e(t.slice(0,1)),16),n=parseInt(e(t.slice(1,2)),16),i=parseInt(e(t.slice(2,3)),16)):6===t.length?(r=parseInt(t.slice(0,2),16),n=parseInt(t.slice(2,4),16),i=parseInt(t.slice(4,6),16)):console.warn("invalid hex color:",t),"rgb("+r+", "+n+", "+i+")"},n.getElementsWithImages=function(){return n.markElementsWithImages(),document.querySelectorAll("."+i)},n.hasImage=function(t){var e=t.style.cssText?t.style.cssText.toLowerCase():t.style.cssText;return t&&(n.isImageElement(t)||-1!==e.indexOf("background-image"))},n.markElementsWithImages=function(){for(var t=document.getElementsByTagName("*"),e=0,r=t.length;r>e;e++)n.hasImage(t[e])&&n.setImgixClass(t[e])},n.hasClass=function(t,e){return(" "+t.className+" ").indexOf(" "+e+" ")>-1},n.setImgixClass=function(t){if(n.hasClass(t,i))return n.getImgixClass(t);var e=n.getXPathClass(n.getElementTreeXPath(t));return t.classList.add(e),t.classList.add(i),n.getImgixClass(t)},n.getImgixClass=function(t){return n.hasClass(t,i)?t.className.match(/imgix-el-[^\s]+/)[0]:void 0},n.getXPathClass=function(t){var e;return e=t?n.hashCode(t):(new Date).getTime().toString(36),"imgix-el-"+e},n.rgbToHex=function(t){var e=t.split(",");return e=e.map(function(t){return n.componentToHex(parseInt(t.replace(/\D/g,"")))}),e.join("")},n.componentToHex=function(t){var e=t.toString(16);return 1===e.length?"0"+e:e},n.getElementTreeXPath=function(t){for(var e=[];t&&t.nodeType===Node.ELEMENT_NODE;t=t.parentNode){for(var r=0,n=t.previousSibling;n;n=n.previousSibling)n.nodeType!==Node.DOCUMENT_TYPE_NODE&&n.nodeName===t.nodeName&&++r;var i=(t.prefix?t.prefix+":":"")+t.localName,o=r?"["+(r+1)+"]":"";e.splice(0,0,i+o)}return e.length?"/"+e.join("/"):null},n.getFontLookup=function(){return{"American Typewriter":"American Typewriter","American Typewriter Bold":"American Typewriter,bold","American Typewriter Condensed":"American Typewriter Condensed","American Typewriter Condensed Bold":"American Typewriter Condensed,bold","American Typewriter Condensed Light":"American Typewriter Condensed Light","American Typewriter Light":"American Typewriter Light","Andale Mono":"Andale Mono",Arial:"Arial","Arial Black":"Arial Black","Arial Bold":"Arial,bold","Arial Bold Italic":"Arial,bold,italic","Arial Italic":"Arial,italic",Baskerville:"Baskerville","Big Caslon":"Big Caslon","Brush Script MT":"Brush Script MT",Cochin:"Cochin",Copperplate:"Copperplate",Courier:"Courier","Courier Bold":"Courier,bold","Courier Oblique":"Courier Oblique",Didot:"Didot",Futura:"Futura","Futura Condensed":"Futura Condensed Medium","Futura Italic":"Futura Medium,italic",Georgia:"Georgia","Georgia Bold":"Georgia,bold","Georgia Bold Italic":"Georgia,bold,italic","Georgia Italic":"Georgia,italic","Gill Sans":"Gill Sans","Gill Sans Bold":"Gill Sans,bold","Gill Sans Bold Italic":"Gill Sans,bold,italic","Gill Sans Italic":"Gill Sans,italic","Gill Sans Light":"Gill Sans Light","Gill Sans Light Italic":"Gill Sans Light,italic",Helvetica:"Helvetica","Helvetica Bold":"Helvetica,bold","Helvetica Light":"Helvetica Light","Helvetica Light Oblique":"Helvetica Light Oblique","Helvetica Neue":"Helvetica Neue","Helvetica Neue Bold":"Helvetica Neue,bold","Helvetica Neue Bold Italic":"Helvetica Neue,bold,italic","Helvetica Neue Condensed Black":"Helvetica Neue Condensed Black","Helvetica Neue Condensed Bold":"Helvetica Neue Condensed,bold","Helvetica Neue Light":"Helvetica Neue Light","Helvetica Neue Light Italic":"Helvetica Neue Light,italic","Helvetica Neue Medium":"Helvetica Neue Medium","Helvetica Neue UltraLight":"Helvetica Neue UltraLight","Helvetica Neue UltraLight Italic":"Helvetica Neue UltraLight,italic","Helvetica Oblique":"Helvetica Oblique",Herculanum:"Herculanum",Impact:"Impact","Marker Felt Thin":"Marker Felt Thin","Marker Felt Wide":"Marker Felt Wide",Optima:"Optima","Optima Bold":"Optima,bold","Optima Bold Italic":"Optima,bold,italic","Optima ExtraBlack":"Optima ExtraBlack","Optima Italic":"Optima,italic",Papyrus:"Papyrus","Papyrus Condensed":"Papyrus Condensed",Times:"Times","Times Bold":"Times,bold","Times Bold Italic":"Times,bold,italic","Times Italic":"Times,italic","Times New Roman":"Times New Roman","Times New Roman Bold":"Times New Roman,bold","Times New Roman Bold Italic":"Times New Roman,bold,italic","Times New Roman Italic":"Times New Roman,italic","Trebuchet MS":"Trebuchet MS","Trebuchet MS Bold":"Trebuchet MS,bold","Trebuchet MS Bold Italic":"Trebuchet MS,bold,italic","Trebuchet MS Italic":"Trebuchet MS,italic",Verdana:"Verdana","Verdana Bold":"Verdana,bold","Verdana Bold Italic":"Verdana,bold,italic","Verdana Italic":"Verdana,italic",Zapfino:"Zapfino"}},n.getFonts=function(){return Object.keys(n.getFontLookup())},n.searchFonts=function(t){return t=t.toLowerCase(),n.getFonts().filter(function(e){return-1!==e.toLowerCase().indexOf(t)})},n.isFontAvailable=function(t){return n.isDef(n.getFontLookup()[t])},n.getAllParams=function(){return["bri","con","exp","gam","high","hue","invert","int","sat","shad","sharp","usm","usmrad","vib","auto","bg","ba","balph","bc","bf","bh","blend","bm","bp","bs","bw","border","pad","dl","fm","q","mask","nr","nrs","class","colors","prefix","palette","page","dpr","flip","or","rot","crop","fit","h","rect","w","blur","htn","mono","px","sepia","txt","txtalign","txtclip","txtclr","txtfit","txtfont","txtline","txtlineclr","txtpad","txtshad","txtsize","trim","trimcolor","trimmd","mark","markalign","markalpha","markfit","markh","markpad","markscale","markw"]},n.getParamAliases=function(){return{t:"txt",tf:"txtfont",tsz:"txtsize",tl:"txtline",tsh:"txtshad",tp:"txtpad",txtlinecolor:"txtlineclr",ta:"txtalign",intensity:"int",monochrome:"mono",f:"fit",orient:"or",m:"watermark",mf:"markfit",ms:"markscale",ma:"markalign",mp:"markpad"}},n.getDefaultParamValues=function(){return{bri:0,con:0,exp:0,gam:0,high:0,hue:0,sat:0,shad:0,sharp:0,usm:0,usmrad:2.5,vib:0,ba:"middle,center",balph:100,bf:"clip",bp:0,pad:0,q:75,nr:20,nrs:20,colors:6,prefix:"image",palette:"",page:1,dpr:1,rot:0,fit:"clip",blur:0,htn:0,px:0,sepia:0,txtalign:"bottom,right",txtclip:"end",txtclr:"000",txtfont:"Helvetica",txtline:0,txtlineclr:"FFF",txtpad:10,txtsize:12,trimmd:11,markalign:"bottom,right",markalpha:100,markfit:"clip",markpad:10}},n.getDefaultParamValue=function(t){return n.getDefaultParamValues()[t]},n.getDefaultParams=function(){return Object.keys(n.getDefaultParamValues())},n.makeCssClass=function(t){return"tmp_"+n.hashCode(t)},n.injectStyleSheet=function(t){var e=document.createElement("link");e.type="text/css",e.rel="stylesheet",e.href=t,document.getElementsByTagName("head")[0].appendChild(e)},n.findInjectedStyleSheet=function(t){if(document.styleSheets)for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].href===t)return!0;return!1},n.getElementImageSize=function(t){var e=0,r=0;return n.isImageElement(t)?(e=t.naturalWidth,r=t.naturalHeight):(e=n.helpers.extractInt(n.getCssProperty(t,"width")),r=n.helpers.extractInt(n.getCssProperty(t,"height"))),{width:e,height:r}},n.getCssPropertyById=function(t,e){var r=document.getElementById(t);return n.helpers.getElementCssProperty(r,e)},n.getCssProperty=function(t,e){return n.helpers.getElementCssProperty(t,e)},n.getCssPropertyBySelector=function(t,e){var r=document.querySelector(t);return n.helpers.getElementCssProperty(r,e)},n.instanceOfImgixURL=function(t){return t&&"[object imgixURL]"===t.toString()},n.setGradientOnElement=function(t,e,r){var i=[];if("undefined"==typeof r)i=["transparent","transparent"];else{var o=n.hexToRGB(r);"rgba"===o.slice(0,4)?(i.push(o),i.push(n.applyAlphaToRGB(o,0))):(i.push(n.applyAlphaToRGB(o,.5)),i.push(n.applyAlphaToRGB(o,0)))}for(var a=["-ms-linear-gradient(top, "+i[0]+" 0%, "+i[1]+" 100%),-ms-linear-gradient(bottom left, "+e[2]+" 0%,"+e[4]+" 25%, "+e[6]+" 50%, "+e[8]+" 75%,"+e[10]+" 100%)","-webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, "+i[1]+"), color-stop(100%, "+i[0]+")),-webkit-gradient(linear, 0% 100%, 100% 0%, color-stop(0%, "+e[2]+"), color-stop(25%, "+e[4]+"), color-stop(50%, "+e[6]+"), color-stop(75%, "+e[7]+"), color-stop(100%, "+e[10]+"))","-webkit-linear-gradient(top, "+i[0]+", "+i[1]+" 100%),-webkit-linear-gradient(bottom left, "+e[2]+", "+e[4]+", "+e[6]+","+e[8]+")","-moz-linear-gradient(top, "+i[0]+", "+i[1]+" ),-moz-linear-gradient(bottom left, "+e[2]+", "+e[4]+", "+e[6]+","+e[8]+")","-o-linear-gradient(top, "+i[0]+","+i[1]+"),-o-linear-gradient(bottom left, "+e[2]+", "+e[4]+", "+e[6]+","+e[8]+")","linear-gradient(top, "+i[0]+","+i[1]+"),linear-gradient(bottom left, "+e[2]+", "+e[4]+", "+e[6]+","+e[8]+")"],l=0;l<a.length;l++)t.style.backgroundImage=a[l]},n.URL=function(t,e){this._autoUpdateSel=null,this._autoUpdateCallback=null,t&&"//"===t.slice(0,2)&&window&&window.location&&(t=window.location.protocol+t),this.setUrl(t),"object"==typeof e&&this.setParams(e),this.paramAliases={}},n.URL.prototype.attachGradientTo=function(t,e,r){this.getColors(16,function(i){if(i&&i.length<9)return console.warn("not enough colors to create a gradient"),void(r&&"function"==typeof r&&r(!1));if("string"==typeof t){var o=document.querySelectorAll(t);if(o&&o.length>0)for(var a=0;a<o.length;a++)n.setGradientOnElement(o[a],i,e)}else n.setGradientOnElement(t,i,e);r&&"function"==typeof r&&r(!0)})},n.URL.prototype.attachImageTo=function(t,e){if("string"==typeof t){var r=document.querySelectorAll(t);if(r&&r.length>0)for(var i=0;i<r.length;i++)n.setElementImageAfterLoad(r[i],this.getUrl(),e)}else n.setElementImageAfterLoad(t,this.getUrl(),e)},n.createParamString=function(){return new n.URL("")},n.updateVersion={};var o={};n.URL.prototype.getColors=function(t,e){var r=new n.URL(this.getUrl()),i=n.makeCssClass(this.getUrl());if("function"==typeof t)if("number"==typeof e){var a=e;e=t,t=a}else e=t,t=10;r.setPaletteColorNumber(t),r.setPalette("css"),r.setPaletteClass(i);var l=r.getUrl();n.injectStyleSheet(l);var s=function(){if(n.findInjectedStyleSheet(l)){var r=null;setTimeout(function(){for(var a=[],s=100,u=1;t>=u;u++)!function(t){var e=document.createElement("span");e.id=i+"-"+t,e.className=i+"-fg-"+t,document.body.appendChild(e),a.push(new Promise(function(i,o){var a,l=0;a=function(){var o=n.getCssPropertyById(e.id,"color");o!==r?(document.body.removeChild(e),i({num:t,color:o}),r=o):++l<s?setTimeout(a,50):(document.body.removeChild(e),i({num:t,color:"rgb(255, 255, 255)"}))},setTimeout(a,300)}))}(u);Promise.all(a).then(function(t){var r=[];t=t.sort(function(t,e){return t.num-e.num});for(var i=0;i<t.length;i++)r.push(n.hexToRGB(t[i].color));r&&r.length>1&&n.getColorBrightness(r[r.length-1])<n.getColorBrightness(r[0])&&r.reverse(),o[l]=r,e&&e(r)})},10)}else setTimeout(s,100)};o.hasOwnProperty(l)?e&&e(o[l]):s()},n.URL.prototype._handleAutoUpdate=function(){function t(t){return l===i._autoUpdateSel&&t===n.updateVersion[l]}function e(e,r){r in s||(s[r]=[],function(){var e=document.createElement("img"),u=n.updateVersion[l],c=(new Date).getTime();e.src=r,e.onload=e.onerror=function(){if(t(u))for(var e=0;e<s[r].length;e++)if(n.setElementImage(s[r][e],r),a++,"function"==typeof i._autoUpdateCallback){var l={element:s[r][e],isComplete:a===o,percentComplete:a/o*100,totalComplete:a,loadTime:(new Date).getTime()-c,total:o};i._autoUpdateCallback(l)}}}()),s[r].push(e)}function r(t){var r=n.getElementImage(t),o=r;r&&-1!==r.indexOf("?")&&(o=r.split("?")[0]),i.getBaseUrl()?e(t,i.getUrl()):o&&i.getQueryString()?e(t,o+"?"+i.getQueryString()):a++}var i=this,o=0,a=0,l=this._autoUpdateSel,s={};if(n.isDef(n.updateVersion[l])?n.updateVersion[l]++:n.updateVersion[l]=1,null!==this._autoUpdateSel){var u=document.querySelectorAll(this._autoUpdateSel);if(o=u.length,u&&1===o)r(u[0]);else for(var c=0;o>c;c++)r(u[c])}},n.URL.prototype.autoUpdateImg=function(t,e){this._autoUpdateSel=t,this._autoUpdateCallback=e,this._handleAutoUpdate()},n.URL.prototype.setUrl=function(t){t&&"string"==typeof t&&0!==t.length||(t=n.getEmptyImage()),this.urlParts=n.parseUrl(t)},n.URL.prototype.setURL=function(t){return this.setUrl(t)},n.URL.prototype.getURL=function(){return this.getUrl()},n.URL.prototype.toString=function(){return"[object imgixURL]"},n.URL.prototype.getUrl=function(){var t=n.buildUrl(this.urlParts);return t&&0!==t.length?t=n.versionifyUrl(t):n.getEmptyImage()},n.URL.prototype.removeParam=function(t){this.urlParts.paramValues.hasOwnProperty(t)&&(delete this.urlParts.paramValues[t],this.urlParts.params=Object.keys(this.urlParts.paramValues))},n.URL.prototype.clearThenSetParams=function(t){this.clearParams(!1),this.setParams(t)},n.URL.prototype.clearParams=function(t){t=n.isDef(t)?t:!0;for(var e in this.urlParts.paramValues)this.urlParts.paramValues.hasOwnProperty(e)&&this.removeParam(e);t&&this._handleAutoUpdate()},n.URL.prototype.setParams=function(t,e){if(n.instanceOfImgixURL(t))return void console.warn("setParams warning: dictionary of imgix params expectd. imgix URL instance passed instead");for(var r in t)t.hasOwnProperty(r)&&this.setParam(r,t[r],e,!0);this._handleAutoUpdate()},n.URL.prototype.setParam=function(t,e,r,i){if(t=t.toLowerCase(),r=n.isDef(r)?r:!0,i=n.isDef(i)?i:!1,("col"===t||"colorize"===t||"blend"===t||"mono"===t||"monochrome"===t)&&"rgb"===e.slice(0,3)&&(e=n.rgbToHex(e)),-1===n.getAllParams().indexOf(t))return console.warn("'"+t+"' is an invalid imgix param"),this;if(!r&&this.urlParts.paramValues[t])return this;if("txtfont"===t&&n.isFontAvailable(e)){var o=n.getFontLookup()[e];o&&(e=o)}return n.getDefaultParamValue(t)!==e&&n.isDef(e)&&null!==e&&0!==e.length?(-1===this.urlParts.params.indexOf(t)&&this.urlParts.params.push(t),decodeURIComponent(e)===e&&(e=encodeURIComponent(e)),this.urlParts.paramValues[t]=String(e),i||this._handleAutoUpdate(),this):(this.removeParam(t),this)},n.URL.prototype.getParam=function(t){if("mark"===t||"mask"===t){var e=this.urlParts.paramValues[t];return decodeURIComponent(e)!==e?decodeURIComponent(e):e}return this.urlParts.paramValues[t]},n.URL.prototype.getParams=function(){return this.urlParts.paramValues?this.urlParts.paramValues:{}},n.URL.prototype.getBaseUrl=function(){var t=this.getUrl();return-1!==t.indexOf("?")&&(t=this.getUrl().split("?")[0]),t!==window.location.href?t:""},n.URL.prototype.getQueryString=function(){var t=this.getUrl();return-1!==t.indexOf("?")?this.getUrl().split("?")[1]:""},n.URL.theGetSetFuncs=Object.freeze({bri:"Brightness",con:"Contrast",exp:"Exposure",gam:"Gamma",high:"Highlight",hue:"Hue",invert:"Invert",sat:"Saturation",shad:"Shadow",sharp:"Sharpness",usm:"UnsharpMask",usmrad:"UnsharpMaskRadius",vib:"Vibrance",auto:"Auto",bg:"Background",ba:"BlendAlign",balph:"BlendAlpha",bc:"BlendCrop",bf:"BlendFit",bh:"BlendHeight",blend:"Blend",bm:"BlendMode",bp:"BlendPadding",bs:"BlendSize",bw:"BlendWidth",border:"Border",pad:"Pad",dl:"Download",fm:"Format",q:"Quality",mask:"Mask",nr:"NoiseReduction",nrs:"NoiseReductionSharpen",palette:"Palette","class":"PaletteClass",prefix:"PalettePrefix",colors:"PaletteColorNumber",page:"Page",dpr:"DPR",flip:"Flip",or:"Orient",rot:"Rotate",crop:"Crop",fit:"Fit",h:"Height",rect:"Rectangle",w:"Width",blur:"Blur",htn:"Halftone",mono:"Monochrome",px:"Pixelate",sepia:"Sepia",txt:"Text",txtalign:"TextAlign",txtclip:"TextClip",txtclr:"TextColor",txtfit:"TextFit",txtfont:"TextFont",txtline:"TextLine",txtlineclr:"TextLineColor",txtpad:"TextPad",txtsize:"TextSize",txtshad:"TextShadow",trim:"Trim",trimcolor:"TrimColor",trimmd:"TrimMeanDifference",mark:"Watermark",markalign:"WatermarkAlign",markalpha:"WatermarkAlpha",markfit:"WatermarkFit",markh:"WatermarkHeight",markpad:"WatermarkPadding",markscale:"WatermarkScale",markw:"WatermarkWidth"});for(var a in n.URL.theGetSetFuncs)n.URL.theGetSetFuncs.hasOwnProperty(a)&&!function(t){n.URL.prototype["set"+n.URL.theGetSetFuncs[t]]=function(e,r){return this.setParam(t,e,r)},n.URL.prototype["get"+n.URL.theGetSetFuncs[t]]=function(){return this.getParam(t)}}(a);n.parseUrl=function(t){for(var e=["protocol","hostname","port","path","?","#","hostname"],r=["protocol","hostname","port","pathname","search","hash","host"],i={},o=0;o<r.length;o++)i[r[o]]=n.helpers.urlParser(e[o],t);var a=i.search;if(i.paramValues={},i.params=[],i.baseUrl=t.split("?")[0],a&&a.length>0){"?"===a[0]&&(a=a.substr(1,a.length));for(var l=a.split("&"),s=0;s<l.length;s++){var u=l[s].split("=");u[0]&&u[0].length&&"s"!==u[0]&&(i.paramValues[u[0]]=2===u.length?u[1]:"",-1===i.params.indexOf(u[0])&&i.params.push(u[0]))}}return i},n.buildUrl=function(t){var e=t.protocol+"://"+t.host+t.pathname;if(t.params.length>0){t.params=t.params.map(function(t){return t.toLowerCase()}),t.params=t.params.filter(function(t,e,r){return r.indexOf(t)===e}),t.params=t.params.sort(function(t,e){return e>t?-1:t>e?1:0});for(var r=[],n=0;n<t.params.length;n++)t.paramValues[t.params[n]].length>0&&r.push(t.params[n]+"="+t.paramValues[t.params[n]]);-1!==e.indexOf("?")&&(e=e.split("?")[0]),e+="?"+r.join("&")}return e},n.versionifyUrl=function(t){var e=n.parseUrl(t),r="ixjsv";return e.params.push(r),e.paramValues[r]=n.version,n.buildUrl(e)},n.isDef=function(t){return"undefined"!=typeof t},n.hashCode=function(t){var e,r,n=2166136261;for(e=0,r=t.length;r>e;e++)n^=t.charCodeAt(e),n+=(n<<1)+(n<<4)+(n<<7)+(n<<8)+(n<<24);return("0000000"+(n>>>0).toString(16)).substr(-8)};var l={fluidClass:"imgix-fluid",updateOnResize:!0,updateOnResizeDown:!1,updateOnPinchZoom:!1,highDPRAutoScaleQuality:!0,onChangeParamOverride:null,autoInsertCSSBestPractices:!1,fitImgTagToContainerWidth:!0,fitImgTagToContainerHeight:!1,ignoreDPR:!1,pixelStep:10,debounce:200,lazyLoad:!1,lazyLoadColor:null,lazyLoadOffsetVertical:20,lazyLoadOffsetHorizontal:20,throttle:200,maxHeight:5e3,maxWidth:5e3,onLoad:null};n.FluidSet=function(t){n.helpers.isReallyObject(t)?this.options=n.helpers.mergeObject(e(),t):this.options=n.helpers.mergeObject(e(),{}),this.lazyLoadOffsets={t:Math.max(this.options.lazyLoadOffsetVertical,0),b:Math.max(this.options.lazyLoadOffsetVertical,0),l:Math.max(this.options.lazyLoadOffsetHorizontal,0),r:Math.max(this.options.lazyLoadOffsetHorizontal,0)},this.namespace=Math.random().toString(36).substring(7),this.windowResizeEventBound=!1,this.windowScrollEventBound=!1,this.windowLastWidth=0,this.windowLastHeight=0},n.FluidSet.prototype.updateSrc=function(t,e){if(t.hasAttribute("src")&&""===t.getAttribute("src")&&t.setAttribute("src",n.getEmptyImage()),t.offsetWidth||t.offsetHeight||t.getClientRects().length){var r=this.getImgDetails(t,e||1),i=r.url,o=r.width,a=r.height;if(this.options.lazyLoad){var l=t.getBoundingClientRect(),s={left:0-this.lazyLoadOffsets.l,top:0-this.lazyLoadOffsets.t,bottom:(window.innerHeight||document.documentElement.clientHeight)+this.lazyLoadOffsets.b,right:(window.innerWidth||document.documentElement.clientWidth)+this.lazyLoadOffsets.r};if(l.top>s.bottom||l.left>s.right||l.top+a<s.top||l.left+o<s.left){if(!t.fluidLazyColored&&this.options.lazyLoadColor){t.fluidLazyColored=1;var u=this,c=typeof this.options.lazyLoadColor,p=new n.URL(n.helpers.getImgSrc(t));p.getColors(16,function(e){if(!e)return void console.warn("No colors found for",p.getURL(),"for element",t);var r=null;"boolean"===c?r=e[0]:"number"===c&&u.options.lazyLoadColor<e.length?r=e[u.options.lazyLoadColor]:"function"===c&&(r=u.options.lazyLoadColor(t,e)),null!==r&&(n.isImageElement(t)&&t.parentNode&&"body"!==t.parentNode.tagName.toLowerCase()?t.parentNode.style.backgroundColor=r:t.style.backgroundColor=r);
})}return}}if(t.lastWidth=t.lastWidth||0,t.lastHeight=t.lastHeight||0,!(this.options.updateOnResizeDown===!1&&t.lastWidth>=o&&t.lastHeight>=a)){t.fluidUpdateCount||(t.fluidUpdateCount=0);var d=function(){};this.options.onLoad&&"function"==typeof this.options.onLoad&&(d=this.options.onLoad);var h=function(t,e){t.fluidUpdateCount=parseInt(t.fluidUpdateCount,10)+1,d(t,e)};n.setElementImageAfterLoad(t,i,h),t.lastWidth=o,t.lastHeight=a}}},n.FluidSet.prototype.getImgDetails=function(t,e){if(t){var r=n.helpers.getDPR(t),i=this.options.pixelStep,o=n.helpers.calculateElementSize(n.isImageElement(t)?t.parentNode:t),a=n.helpers.pixelRound(o.width*e,i),l=n.helpers.pixelRound(o.height*e,i),s=new n.URL(n.helpers.getImgSrc(t));s.setHeight(""),s.setWidth(""),a=Math.min(a,this.options.maxWidth),l=Math.min(l,this.options.maxHeight),1===r||this.options.ignoreDPR||s.setDPR(r),this.options.highDPRAutoScaleQuality&&r>1&&s.setQuality(Math.min(Math.max(parseInt(100/r,10),30),75)),this.options.fitImgTagToContainerHeight&&this.options.fitImgTagToContainerWidth&&s.setFit("crop"),"crop"===s.getFit()?(l>0&&(!n.isImageElement(t)||n.isImageElement(t)&&this.options.fitImgTagToContainerHeight)&&s.setHeight(l),a>0&&(!n.isImageElement(t)||n.isImageElement(t)&&this.options.fitImgTagToContainerWidth)&&s.setWidth(a)):a>=l?s.setWidth(a):s.setHeight(l),!n.isImageElement(t)&&this.options.autoInsertCSSBestPractices&&t.style&&(t.style.backgroundRepeat="no-repeat",t.style.backgroundSize="cover",t.style.backgroundPosition="50% 50%");var u={};null!==this.options.onChangeParamOverride&&"function"==typeof this.options.onChangeParamOverride&&(u=this.options.onChangeParamOverride(a,l,s.getParams(),t));for(var c in u)u.hasOwnProperty(c)&&s.setParam(c,u[c]);return{url:s.getURL(),width:a,height:l}}},n.FluidSet.prototype.toString=function(){return"[object FluidSet]"},n.FluidSet.prototype.reload=function(){n.fluid(this),this.windowLastWidth=n.helpers.getWindowWidth(),this.windowLastHeight=n.helpers.getWindowHeight()},n.FluidSet.prototype.attachGestureEvent=function(t){var e=this;t.addEventListener&&!t.listenerAttached&&(t.addEventListener("gestureend",function(t){e.updateSrc(this,t.scale)},!1),t.addEventListener("gesturechange",function(){e.updateSrc(this)},!1),t.listenerAttached=!0)};var s={},u={};n.FluidSet.prototype.attachScrollListener=function(){s[this.namespace]=n.helpers.throttler(function(){this.reload()}.bind(this),this.options.throttle),document.addEventListener?window.addEventListener("scroll",s[this.namespace],!1):window.attachEvent("onscroll",s[this.namespace]),this.windowScrollEventBound=!0},n.FluidSet.prototype.attachWindowResizer=function(){u[this.namespace]=n.helpers.debouncer(function(){(this.windowLastWidth!==n.helpers.getWindowWidth()||this.windowLastHeight!==n.helpers.getWindowHeight())&&this.reload()}.bind(this),this.options.debounce),window.addEventListener?window.addEventListener("resize",u[this.namespace],!1):window.attachEvent&&window.attachEvent("onresize",u[this.namespace]),this.windowResizeEventBound=!0},n.fluid=function(){var t,r;if(arguments.length>0&&1===arguments[0].nodeType?(r=arguments[0],t=arguments[1]):t=arguments[0],null!==t){var i,o;if(n.helpers.isReallyObject(t)){for(var a=Object.keys(t),l=Object.keys(e()),s=0;s<a.length;s++)-1===l.indexOf(a[s])&&console.warn("'"+a[s]+"' is not a valid imgix.fluid config option. See https://github.com/imgix/imgix.js/blob/master/docs/api.md#imgix.fluid for a list of valid options.");i=n.helpers.mergeObject(e(),t),o=new n.FluidSet(i),t=null}else n.helpers.isFluidSet(t)?(o=t,i=o.options):(i=n.helpers.mergeObject(e(),{}),o=new n.FluidSet(i));var u;if(t&&!n.helpers.isFluidSet(t))u=Array.isArray(t)?t:[t];else{var c=i.fluidClass.toString();c="."===c.slice(0,1)?c:"."+c,u=(r||document).querySelectorAll(c),r&&n.helpers.matchesSelector(r,c)&&(u=Array.prototype.slice.call(u),u.unshift(r))}for(var p=0;p<u.length;p++)null!==u[p]&&(i.updateOnPinchZoom&&o.attachGestureEvent(u[p]),o.updateSrc(u[p]));return i.lazyLoad&&!o.windowScrollEventBound&&o.attachScrollListener(),i.updateOnResize&&!o.windowResizeEventBound&&o.attachWindowResizer(),o}},"undefined"!=typeof window&&(n.onready=function(t){function e(t){for(h=1;t=n.shift();)t()}var r,n=[],i=!1,o=document,a=o.documentElement,l=a.doScroll,s="DOMContentLoaded",u="addEventListener",c="onreadystatechange",p="readyState",d=l?/^loaded|^c/:/^loaded|c/,h=d.test(o[p]);return o[u]&&o[u](s,r=function(){o.removeEventListener(s,r,i),e()},i),l&&o.attachEvent(c,r=function(){/^c/.test(o[p])&&(o.detachEvent(c,r),e())}),t=l,t?function(e){self!==top?h?e():n.push(e):!function(){try{a.doScroll("left")}catch(r){return setTimeout(function(){t(e)},50)}e()}()}:function(t){h?t():n.push(t)}}()),"function"==typeof define&&define.amd&&define("imgix",[],function(){return n})}).call(this);